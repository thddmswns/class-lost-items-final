<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>분실물 관리소</title>
<style>
    * { box-sizing: border-box; margin:0; padding:0; font-family: Arial, sans-serif; }
    body { max-width: 800px; margin:auto; padding:15px; background:#f4f4f9; }
    h1,h2,h3 { text-align:center; margin-bottom:15px; color:#333; }
    form { margin-bottom:20px; text-align:center; }
    .form-row { display:flex; flex-wrap:wrap; justify-content:center; gap:10px; margin-bottom:10px; }
    input, button { font-size:16px; padding:8px; flex:1; min-width:100px; border-radius:5px; border:1px solid #ccc; }
    button { background:#4CAF50; color:#fff; border:none; cursor:pointer; min-width:120px; }
    button:hover { background:#45a049; }
    input[type="file"] { border:none; }
    ul { list-style:none; padding:0; }
    li { background:#fff; padding:12px; margin:8px 0; border:1px solid #ddd; border-radius:8px; word-wrap:break-word; }
    .delete-btn { background:#f44336; color:#fff; border:none; cursor:pointer; border-radius:5px; padding:6px 12px; }
    .delete-btn:hover { background:#d32f2f; }
    img { max-width:100%; height:auto; margin-top:8px; border-radius:5px; }
    p { text-align:center; color:red; margin-top:10px; }
    @media(max-width:480px){ .form-row { flex-direction:column; align-items:center; } input, button { flex:1 1 100%; } }
</style>
</head>
<body>
<h1>분실물 관리소</h1>

<h2>등록</h2>
<form method="post" enctype="multipart/form-data">
    <div class="form-row">
        <input type="text" name="name" placeholder="이름" required>
        <input type="text" name="place" placeholder="장소" required>
        <input type="text" name="contact" placeholder="연락처" required>
        <input type="date" name="date" required>
        <input type="file" name="image" accept="image/*">
        <button type="submit" name="register">등록</button>
    </div>
</form>

<h2>검색</h2>
<form method="post">
    <div class="form-row">
        <input type="text" name="search" placeholder="검색어" required>
        <button type="submit" name="search">검색</button>
    </div>
</form>

{% if items %}
<h3>검색 결과:</h3>
<ul>
{% for item in items %}
<li>
물건: {{ item.name }}<br>
장소: {{ item.place }}<br>
날짜: {{ item.date }}<br>
연락처: {{ item.contact }}<br>
{% if item.image %}<img src="{{ url_for('static', filename='uploads/' ~ item.image) }}">{% endif %}
<form action="/delete/{{ item.id }}" method="post" style="display:inline;">
<button type="submit" class="delete-btn">찾았음 (삭제)</button>
</form>
</li>
{% endfor %}
</ul>
{% elif message %}
<p>{{ message }}</p>
{% endif %}

<h2>전체 등록된 분실물</h2>
{% if all_items %}
<ul>
{% for item in all_items %}
<li>
물건: {{ item.name }}<br>
장소: {{ item.place }}<br>
날짜: {{ item.date }}<br>
연락처: {{ item.contact }}<br>
{% if item.image %}<img src="{{ url_for('static', filename='uploads/' ~ item.image) }}">{% endif %}
<form action="/delete/{{ item.id }}" method="post" style="display:inline;">
<button type="submit" class="delete-btn">찾았음 (삭제)</button>
</form>
</li>
{% endfor %}
</ul>
{% else %}
<p>등록된 분실물이 없습니다.</p>
{% endif %}
</body>
</html>
