<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>분실물 관리소</title>
<style>
* { box-sizing: border-box; margin:0; padding:0; font-family: Arial, sans-serif; }
body { max-width: 900px; margin:auto; padding:15px; background:#f4f4f9; }
h1,h2,h3 { text-align:center; margin-bottom:15px; color:#333; }
form { margin-bottom:20px; text-align:center; }
.form-row { display:flex; flex-wrap:wrap; justify-content:center; gap:10px; margin-bottom:10px; }
input, button { font-size:16px; padding:8px; border-radius:5px; border:1px solid #ccc; }
input { flex:1; min-width:100px; }
button { background:#4CAF50; color:#fff; border:none; cursor:pointer; min-width:120px; }
button:hover { background:#45a049; }
input[type="file"] { border:none; }
ul { list-style:none; padding:0; }
li { background:#fff; padding:12px; margin:8px 0; border:1px solid #ddd; border-radius:8px; display:flex; align-items:center; justify-content:space-between; }
.item-info { flex:1; }
.item-info p { margin:4px 0; }
.delete-btn { background:#f44336; color:#fff; border:none; cursor:pointer; border-radius:5px; padding:6px 12px; margin-left:10px; }
.delete-btn:hover { background:#d32f2f; }
.item-image { max-width:120px; max-height:80px; margin-left:10px; object-fit:cover; border-radius:5px; }
p { text-align:center; color:red; margin-top:10px; }
@media(max-width:600px){
    li { flex-direction:column; align-items:flex-start; }
    .item-image { margin-left:0; margin-top:5px; }
}
</style>
</head>
<body>
<h1>분실물 관리소</h1>

<h2>등록</h2>
<form method="post" enctype="multipart/form-data">
    <div class="form-row">
        <input type="text" name="name" placeholder="이름" required>
        <input type="text" name="place" placeholder="장소" required>
        <input type="text" name="contact" placeholder="연락처" required>
        <input type="file" name="image" accept="image/*">
        <button type="submit" name="register">등록</button>
    </div>
</form>

<h2>검색</h2>
<form method="post">
    <div class="form-row">
        <input type="text" name="search" placeholder="검색어" required>
        <button type="submit" name="search">검색</button>
    </div>
</form>

{% if items %}
<h3>검색 결과:</h3>
<ul>
{% for item in items %}
<li>
    <div class="item-info">
        <p>물건: {{ item.name }}</p>
        <p>연락처: {{ item.contact }}</p>
        <p>장소: {{ item.place }}</p>
        <p>날짜: {{ item.date }}</p>
        <form action="/delete/{{ item.id }}" method="post" style="display:inline;">
            <button type="submit" class="delete-btn">찾았음 (삭제)</button>
        </form>
    </div>
    {% if item.image %}
        <img src="{{ url_for('static', filename='uploads/' ~ item.image) }}" class="item-image">
    {% endif %}
</li>
{% endfor %}
</ul>
{% elif message %}
<p>{{ message }}</p>
{% endif %}

<h2>전체 등록된 분실물</h2>
{% if all_items %}
<ul>
{% for item in all_items %}
<li>
    <div class="item-info">
        <p>물건: {{ item.name }}</p>
        <p>연락처: {{ item.contact }}</p>
        <p>장소: {{ item.place }}</p>
        <p>날짜: {{ item.date }}</p>
        <form action="/delete/{{ item.id }}" method="post" style="display:inline;">
            <button type="submit" class="delete-btn">찾았음 (삭제)</button>
        </form>
    </div>
    {% if item.image %}
        <img src="{{ url_for('static', filename='uploads/' ~ item.image) }}" class="item-image">
    {% endif %}
</li>
{% endfor %}
</ul>
{% else %}
<p>등록된 분실물이 없습니다.</p>
{% endif %}
</body>
</html>
